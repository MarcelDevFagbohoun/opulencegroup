{% load static %}

<!-- Hero Slider Section -->
<section class="relative h-[70vh] overflow-hidden">

  <!-- Slides -->
  <div class="relative h-full w-full">
    {% comment %} Liste des slides {% endcomment %}
    {% for slide in hero_slides %}
      <div class="hero-slide absolute inset-0 bg-cover bg-center transition-opacity duration-1000 {% if forloop.first %}opacity-100 z-10{% else %}opacity-0 z-0{% endif %}" 
           style="background-image: url('{{ slide.image.url }}');">
        <!-- Overlay -->
        <div class="absolute inset-0 bg-black/40"></div>
        <!-- Content -->
        <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-full flex flex-col justify-center text-center md:text-left">
          <h2 class="text-4xl md:text-5xl font-bold text-white mb-4">{{ slide.title }}</h2>
          <p class="text-lg md:text-xl text-white/90 mb-6">{{ slide.subtitle }}</p>
          <div class="flex flex-col sm:flex-row justify-center md:justify-start gap-4">
            {% if slide.button1_url %}
              <a href="{{ slide.button1_url }}" class="px-6 py-3 bg-primary text-white font-semibold rounded-lg hover:bg-primary/90 transition">
                {{ slide.button1_text }}
              </a>
            {% endif %}
            {% if slide.button2_url %}
              <a href="{{ slide.button2_url }}" class="px-6 py-3 border-2 border-white text-white font-semibold rounded-lg hover:bg-white hover:text-primary transition">
                {{ slide.button2_text }}
              </a>
            {% endif %}
          </div>
        </div>
      </div>
    {% endfor %}
  </div>

  <!-- Navigation Arrows -->
  <button onclick="changeSlide(-1)" class="absolute left-4 top-1/2 transform -translate-y-1/2 z-20 bg-white/20 hover:bg-white/40 rounded-full p-3 transition-all duration-300">
    <i class="fas fa-chevron-left text-2xl"></i>
  </button>
  <button onclick="changeSlide(1)" class="absolute right-4 top-1/2 transform -translate-y-1/2 z-20 bg-white/20 hover:bg-white/40 rounded-full p-3 transition-all duration-300">
    <i class="fas fa-chevron-right text-2xl"></i>
  </button>

  <!-- Slide Indicators -->
  <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 z-20 flex space-x-3">
    {% for slide in hero_slides %}
      <button onclick="goToSlide({{ forloop.counter0 }})" class="hero-indicator w-3 h-3 rounded-full bg-white/50 hover:bg-white/80 transition-colors {% if forloop.first %}active{% endif %}"></button>
    {% endfor %}
  </div>
</section>

<!-- JS pour le slider -->
<script>
let currentSlide = 0;
const slides = document.querySelectorAll('.hero-slide');
const indicators = document.querySelectorAll('.hero-indicator');

function showSlide(n) {
  slides[currentSlide].classList.remove('opacity-100', 'z-10');
  slides[currentSlide].classList.add('opacity-0', 'z-0');
  indicators[currentSlide].classList.remove('active');

  currentSlide = n;
  if(currentSlide >= slides.length) currentSlide = 0;
  if(currentSlide < 0) currentSlide = slides.length - 1;

  slides[currentSlide].classList.remove('opacity-0', 'z-0');
  slides[currentSlide].classList.add('opacity-100', 'z-10');
  indicators[currentSlide].classList.add('active');
}

function goToSlide(n) { showSlide(n); }
function changeSlide(direction) { showSlide(currentSlide + direction); }

// Auto-slide toutes les 5s
setInterval(() => { changeSlide(1); }, 5000);
</script>

<!-- CSS simple -->
<style>
.hero-slide { transition: opacity 1s ease-in-out; }
.hero-indicator.active { background-color: rgba(255,255,255,1) !important; }
</style>
