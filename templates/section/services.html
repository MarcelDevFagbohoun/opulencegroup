<section id="service" class="bg-gray-50 py-16 w-full">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">

    <!-- Title -->
    <div class="text-center mb-12">
      <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">Nos Services</h2>
      <p class="text-gray-600 max-w-2xl mx-auto">Découvrez nos services pour sublimer vos projets.</p>
    </div>

    <!-- Services Grid -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">

      {% for service in services %}
      <div class="bg-white rounded-2xl shadow-md hover:shadow-xl transition overflow-hidden flex flex-col h-full">

        <!-- Icon -->
        <div class="p-6 flex justify-center">
          <i class="{{ service.icon }} text-5xl text-primary"></i>
        </div>

        <!-- Title & Description -->
        <div class="p-6 flex-1 flex flex-col justify-between">
          <div>
            <h3 class="text-xl font-bold text-primary mb-2">{{ service.title }}</h3>
            <p class="text-gray-600 text-sm mb-4">{{ service.description }}</p>
          </div>

          <!-- Button modal -->
          <button class="open-modal bg-primary text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition" 
                  data-modal="modal-{{ forloop.counter }}">
            En savoir plus
          </button>
        </div>

        <!-- Modal -->
        <div id="modal-{{ forloop.counter }}" class="modal fixed inset-0 z-50 hidden items-center justify-center bg-black bg-opacity-50">

          <div class="bg-white rounded-2xl p-6 max-w-md w-full relative shadow-lg">

            <button class="close-modal absolute top-3 right-3 text-gray-500 hover:text-gray-900 text-xl">
              <i class="fas fa-times"></i>
            </button>

            <h4 class="text-2xl font-bold mb-4 text-primary">{{ service.title }}</h4>
            <ul class="space-y-2 text-gray-700 mb-6">
              {% for detail in service.details_list %}
              <li class="flex items-start gap-2">
                <i class="fas fa-check text-green-500 mt-1"></i>
                <span>{{ detail }}</span>
              </li>
              {% endfor %}
            </ul>

            <a href="{{ service.whatsapp_link }}" target="_blank"
               class="w-full inline-flex items-center justify-center gap-3 bg-green-500 hover:bg-green-600 text-white font-semibold py-3 px-6 rounded-xl transition shadow-md text-lg">
              <i class="fab fa-whatsapp text-2xl"></i> Commander via WhatsApp
            </a>
          </div>

        </div>
      </div>
      {% endfor %}

    </div>
  </div>
</section>

<!-- JS simple pour modal -->
<script>
  // Récupère tous les boutons
  const modalButtons = document.querySelectorAll('.open-modal');
  const modals = document.querySelectorAll('.modal');

  modalButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      const modalId = btn.dataset.modal;
      const modal = document.getElementById(modalId);
      modal.classList.remove('hidden');
      modal.classList.add('flex');
    });
  });

  // Boutons pour fermer le modal
  const closeButtons = document.querySelectorAll('.close-modal');
  closeButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      btn.closest('.modal').classList.add('hidden');
      btn.closest('.modal').classList.remove('flex');
    });
  });

  // Cliquer en dehors pour fermer
  modals.forEach(modal => {
    modal.addEventListener('click', e => {
      if(e.target === modal) {
        modal.classList.add('hidden');
        modal.classList.remove('flex');
      }
    });
  });
</script>

<style>
  /* Animation simple pour le modal */
  .modal {
    transition: opacity 0.3s ease, transform 0.3s ease;
  }
</style>
