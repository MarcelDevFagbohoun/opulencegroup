{% load static %}
<!-- Authentication Modal -->
<div id="auth-modal" class="fixed inset-0 z-50 hidden">
    <!-- Backdrop -->
    <div class="fixed inset-0 bg-black/50" onclick="toggleAuthModal()"></div>

    <!-- Modal -->
    <div class="fixed inset-0 flex items-center justify-center p-4 overflow-y-auto">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md mx-auto my-8">
            <!-- Modal Header -->
            <div class="flex justify-center items-center p-6 border-b border-neutral-200 relative">
                <img src="{% static 'img/logo.png' %}" alt="Logo" class="h-16"> <!-- logo centrÃ© -->
                <button onclick="toggleAuthModal()" class="absolute right-4 top-4 text-neutral-600 hover:text-neutral-900 transition-colors">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>

            <!-- Tab Navigation -->
            <div class="flex border-b border-neutral-200">
                <button onclick="switchAuthTab('login')" id="login-tab" class="flex-1 py-4 px-6 text-center font-medium transition-colors border-b-2 border-primary text-primary">
                    Sign In
                </button>
                <button onclick="switchAuthTab('signup')" id="signup-tab" class="flex-1 py-4 px-6 text-center font-medium transition-colors border-b-2 border-transparent text-neutral-600 hover:text-neutral-900">
                    Sign Up
                </button>
            </div>

            <!-- Modal Content -->
            <div class="p-6">

                <!-- Display Django messages -->
                {% if messages %}
                <div class="mb-4">
                    {% for message in messages %}
                    <div class="bg-red-100 text-red-700 px-4 py-2 rounded mb-2">
                        {{ message }}
                    </div>
                    {% endfor %}
                </div>
                {% endif %}

                <!-- Login Form -->
                <form id="login-form" method="POST" action="{% url 'login' %}" class="space-y-4">
                    {% csrf_token %}
                    <div>
                        <label class="block text-sm font-medium text-neutral-700 mb-2">Email Address</label>
                        <input type="email" name="email" placeholder="Enter your email" required
                               class="w-full px-4 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-neutral-700 mb-2">Password</label>
                        <input type="password" name="password" placeholder="Enter your password" required
                               class="w-full px-4 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                    </div>
                    <div class="flex items-center justify-between">
                        <label class="flex items-center">
                            <input type="checkbox" name="remember" class="w-4 h-4 text-primary border-neutral-300 rounded focus:ring-primary">
                            <span class="ml-2 text-sm text-neutral-600">Remember me</span>
                        </label>
                        <a href="" class="text-sm text-primary hover:text-primary-600">Forgot password?</a>
                    </div>
                    <button type="submit" class="w-full bg-primary hover:bg-primary-600 text-white font-semibold py-3 rounded-lg transition-colors">
                        Sign In
                    </button>
                </form>

                <!-- Signup Form -->
                <form id="signup-form" method="POST" action="{% url 'signup' %}" class="hidden space-y-4">
                    {% csrf_token %}
                    <div class="grid grid-cols-2 gap-3">
                        <div>
                            <label class="block text-sm font-medium text-neutral-700 mb-2">First Name</label>
                            <input type="text" name="first_name" placeholder="First name" required
                                   class="w-full px-4 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-neutral-700 mb-2">Last Name</label>
                            <input type="text" name="last_name" placeholder="Last name" required
                                   class="w-full px-4 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-neutral-700 mb-2">Email Address</label>
                        <input type="email" name="email" placeholder="Enter your email" required
                               class="w-full px-4 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-neutral-700 mb-2">Password</label>
                        <input type="password" name="password1" placeholder="Create a password" required
                               class="w-full px-4 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-neutral-700 mb-2">Confirm Password</label>
                        <input type="password" name="password2" placeholder="Confirm your password" required
                               class="w-full px-4 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                    </div>
                    <div>
                        <label class="flex items-center">
                            <input type="checkbox" required class="w-4 h-4 text-primary border-neutral-300 rounded focus:ring-primary">
                            <span class="ml-2 text-sm text-neutral-600">
                                I agree to the <a href="/terms" class="text-primary hover:underline">Terms of Service</a> and <a href="/privacy" class="text-primary hover:underline">Privacy Policy</a>
                            </span>
                        </label>
                    </div>
                    <button type="submit" class="w-full bg-primary hover:bg-primary-600 text-white font-semibold py-3 rounded-lg transition-colors">
                        Create Account
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- JS -->
<script>
function toggleAuthModal() {
    const modal = document.getElementById('auth-modal');
    modal.classList.toggle('hidden');
}

function switchAuthTab(tab) {
    const loginForm = document.getElementById('login-form');
    const signupForm = document.getElementById('signup-form');
    const loginTab = document.getElementById('login-tab');
    const signupTab = document.getElementById('signup-tab');

    if(tab === 'login') {
        loginForm.classList.remove('hidden');
        signupForm.classList.add('hidden');
        loginTab.classList.add('border-primary', 'text-primary');
        loginTab.classList.remove('border-transparent', 'text-neutral-600');
        signupTab.classList.remove('border-primary', 'text-primary');
        signupTab.classList.add('border-transparent', 'text-neutral-600');
    } else {
        signupForm.classList.remove('hidden');
        loginForm.classList.add('hidden');
        signupTab.classList.add('border-primary', 'text-primary');
        signupTab.classList.remove('border-transparent', 'text-neutral-600');
        loginTab.classList.remove('border-primary', 'text-primary');
        loginTab.classList.add('border-transparent', 'text-neutral-600');
    }
}

// Open modal automatically if messages exist
document.addEventListener('DOMContentLoaded', function() {
    {% if messages %}
        toggleAuthModal();
    {% endif %}
});
</script>
